<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Raspa y Gana</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --primary:#ffb703;
  --secondary:#219ebc;
  --success:#2a9d8f;
  --danger:#e63946;
  --text:#333;
}

body{
  margin:0;
  font-family: "Segoe UI", system-ui, sans-serif;
  background: linear-gradient(135deg,#fefae0,#e9f5ff);
  color:var(--text);
  text-align:center;
}

header{
  padding:20px;
}

h1{
  margin:0;
  font-size:2.2em;
}

.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
}

#startBtn{
  background:var(--primary);
  border:none;
  padding:15px 35px;
  font-size:1.1em;
  border-radius:30px;
  cursor:pointer;
  box-shadow:0 6px 15px rgba(0,0,0,.15);
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(90px,1fr));
  gap:15px;
  margin-top:30px;
}

.card{
  background:var(--card);
  border-radius:16px;
  height:110px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,.1);
  font-weight:bold;
  transition:.3s;
}

.card:hover{
  transform:translateY(-5px);
}

.card.disabled{
  pointer-events:none;
  opacity:.4;
}

#scratchZone{
  display:none;
  margin-top:30px;
}

#scratchCard{
  width:280px;
  height:180px;
  border-radius:20px;
  background:#fff;
  margin:auto;
  position:relative;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}

#resultText{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.3em;
  font-weight:bold;
  padding:15px;
}

canvas{
  position:absolute;
  inset:0;
  border-radius:20px;
}

#final{
  display:none;
  margin-top:25px;
}

#final p{
  font-size:1.2em;
}

#whatsappBtn{
  background:var(--success);
  color:#fff;
  border:none;
  padding:15px 30px;
  border-radius:30px;
  font-size:1.1em;
  cursor:pointer;
  box-shadow:0 6px 15px rgba(0,0,0,.2);
}

#overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  color:#fff;
  align-items:center;
  justify-content:center;
  z-index:999;
  font-size:1.5em;
}
</style>
</head>

<body>

<header>
  <h1>üéüÔ∏è Raspa y Gana</h1>
  <p>Elige una tarjeta y prueba tu suerte</p>
</header>

<div class="container">
  <button id="startBtn">Empezar</button>

  <div class="grid" id="grid"></div>

  <div id="scratchZone">
    <div id="scratchCard">
      <div id="resultText"></div>
      <canvas id="canvas"></canvas>
    </div>
  </div>

  <div id="final">
    <p id="finalMsg"></p>
    <button id="whatsappBtn">üì≤ Enviar por WhatsApp</button>
  </div>
</div>

<div id="overlay">‚è±Ô∏è Tiempo finalizado</div>

<script>
const premios = [
  "$500",
  "$600",
  "$1,000",
  "$10,000",
  "$30,000",
  "$10,000 mensuales x 12 meses",
  "$5,000 mensuales x 6 meses",
  "$7,000 semanales x 6 meses",
  "PREMIO ESPECIAL"
];

let cartas = premios.concat(Array(21).fill("SIN PREMIO"));
cartas.sort(()=>Math.random()-0.5);

const grid = document.getElementById("grid");
let seleccion = null;
let premioFinal = "";

document.getElementById("startBtn").onclick = ()=>{
  document.getElementById("startBtn").disabled=true;
  crearTarjetas();
  setTimeout(cerrarTodo,300000); // 5 minutos
};

function crearTarjetas(){
  for(let i=0;i<30;i++){
    const c = document.createElement("div");
    c.className="card";
    c.innerText="üé´";
    c.onclick=()=>elegir(c,i);
    grid.appendChild(c);
  }
}

function elegir(card,index){
  if(seleccion) return;
  seleccion=card;
  premioFinal = cartas[index];

  document.querySelectorAll(".card").forEach(c=>{
    if(c!==card) c.classList.add("disabled");
  });

  document.getElementById("scratchZone").style.display="block";
  iniciarRaspado(premioFinal);
}

function iniciarRaspado(premio){
  const canvas=document.getElementById("canvas");
  const ctx=canvas.getContext("2d");
  canvas.width=280;
  canvas.height=180;

  document.getElementById("resultText").innerText =
    premio==="SIN PREMIO" ? "‚ùå No tuviste suerte" : "üéâ Ganaste " + premio;

  ctx.fillStyle="#cfd8dc";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  let raspado=0;

  function raspar(e){
    const r=canvas.getBoundingClientRect();
    const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left;
    const y=(e.touches?e.touches[0].clientY:e.clientY)-r.top;

    ctx.globalCompositeOperation="destination-out";
    ctx.beginPath();
    ctx.arc(x,y,18,0,Math.PI*2);
    ctx.fill();

    raspado+=1;
    if(raspado>120){
      finalizar();
      canvas.removeEventListener("mousemove",raspar);
      canvas.removeEventListener("touchmove",raspar);
    }
  }

  canvas.addEventListener("mousemove",raspar);
  canvas.addEventListener("touchmove",raspar);
}

function finalizar(){
  document.getElementById("final").style.display="block";
  document.getElementById("finalMsg").innerText =
    premioFinal==="SIN PREMIO"
    ? "‚ùå No tuviste suerte esta vez"
    : "üèÜ Premio obtenido: " + premioFinal;
}

document.getElementById("whatsappBtn").onclick=()=>{
  const msg = premioFinal==="SIN PREMIO"
    ? "üéüÔ∏è Raspa y Gana%0A‚ùå No tuve suerte"
    : "üéâ Raspa y Gana%0AüèÜ Gan√©: "+premioFinal;

  window.open("https://wa.me/58752291?text="+msg,"_blank");
};

function cerrarTodo(){
  document.getElementById("overlay").style.display="flex";
  document.querySelectorAll("button").forEach(b=>b.disabled=true);
}
</script>

</body>
  </html>
